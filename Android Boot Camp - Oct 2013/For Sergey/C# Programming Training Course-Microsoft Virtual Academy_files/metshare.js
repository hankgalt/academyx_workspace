if(typeof(meteor)==="undefined"||meteor===null){var monitor_info,monitor_url,key,monitor_jsonp;if(typeof console!=="undefined"&&console.log){console.log("Dependency error. Please make sure metsol.js is loaded and track() has been called.")}monitor_info={useragent:navigator.userAgent,location:document.location,message:"metshare.js was loaded without metsol.js"};monitor_url=[];for(key in monitor_info){if(monitor_info.hasOwnProperty(key)){monitor_url.push(key+"="+encodeURIComponent(monitor_info[key]))}}monitor_url="?"+monitor_url.join("&");monitor_jsonp=document.createElement("script");monitor_jsonp.setAttribute("type","text/javascript");monitor_jsonp.setAttribute("src","http://cdnt.meteorsolutions.com/api/client_error"+monitor_url);document.getElementsByTagName("head")[0].appendChild(monitor_jsonp)}else{if(meteor.missing(meteor.sharing.superbar)){meteor.sharing.superbar={};meteor.sharing.superbar.fb_appid="114189562003069";meteor.sharing.superbar.default_settings={node:null,parentID:null,id:1,size:"med",sites:[],url:window.location.href,application_id:"",message:"",title:"",image:"http://cdnt.meteorsolutions.com/api/null",redirect_uri:"http://www.facebook.com",device:"desktop",orientation:"horizontal",page_position:"left",inset_ratio:0.25,corner_offset:50,margin:8};meteor.sharing.superbar.settings={};meteor.sharing.superbar.sizes={small:16,med:24,large:32,xlarge:40,"2xlarge":48,"mobile-small":64,"mobile-med":72,"mobile-large":88};meteor.sharing.superbar.sites={delicious:{params:["url","title"],url:"http://del.icio.us/post?v=4;url=$url;title=$title",width:"960",height:"500",offset:0,readable_name:"on Delicious"},digg:{url:"http://digg.com/submit?url=$url&title=$title",params:["url","title"],width:"1070",height:"500",offset:-1,readable_name:"on Digg"},email:{url:"mailto:?subject=$title&body=$message%20$url",params:["url","title","message"],width:"500",height:"500",offset:-2,readable_name:"via Email"},facebook:{url:"http://www.facebook.com/dialog/feed?app_id="+meteor.sharing.superbar.fb_appid+"&link=$url&picture=$image&name=$title&description=$message&redirect_uri=$redirect",params:["url","title","message","image","redirect"],width:"1050",height:"500",offset:-3,readable_name:"on Facebook"},linkedin:{url:"http://www.linkedin.com/shareArticle?mini=true&url=$url&title=$message&summary=&source=",params:["url","message"],width:"500",height:"500",offset:-4,readable_name:"on LinkedIn"},live:{url:"http://profile.live.com/badge/?url=$url&title=$title&description=$message",params:["url","title","message"],width:"1015",height:"500",offset:-5,readable_name:"on Windows Live Favorites"},reddit:{url:"http://reddit.com/submit?url=$url&title=$title",params:["url","title"],width:"875",height:"500",offset:-6,readable_name:"on reddit"},twitter:{url:"http://twitter.com/intent/tweet?text=$message+$url",params:["url","message"],width:"750",height:"400",offset:-7,readable_name:"on Twitter"}};meteor.sharing.superbar.init=function(d,c){if(meteor.tracking.is_completed){var e,a,b;e=meteor.random_id(4);d.node=document.createElement("div");d.node.id=e;d.node.className="meteor_share_"+d.id;d.node.style.position="relative";a=document.getElementsByTagName("script");b=a[a.length-1];if(b.parentElement.tagName.toLowerCase()==="head"){document.body.appendChild(d.node)}else{b.parentNode.insertBefore(d.node,b.nextSibling)}meteor.sharing.superbar.configure(d,e,function(f){meteor.sharing.superbar.reinit(f)})}else{if(typeof c==="undefined"){c=0}if(c<5){setTimeout(function(){meteor.sharing.superbar.init(d,++c)},500)}else{meteor.log("Dependency error: Meteor tracking is required for sharing to work properly. Plese make sure that track() is being called called before superbar init.")}}};meteor.sharing.superbar.reinit=function(a){var d,c,b;d=a.bar_id;a=a.config;c=meteor.sharing.superbar.settings[d];for(b in a){if(a.hasOwnProperty(b)){if(b==="sites"){if(c[b].length===0){c[b]=a[b]}}else{if(c[b]===meteor.sharing.superbar.default_settings[b]){c[b]=a[b]}}}}if(c.device==="mobile"){meteor.sharing.superbar.draw_mobile(c,d)}else{meteor.sharing.superbar.draw_desktop(c,d)}};meteor.sharing.superbar.draw_desktop=function(b,e){var h,j,k,g;if(meteor.sharing.superbar.settings[e].parentID){g=document.getElementById(meteor.sharing.superbar.settings[e].parentID);g.appendChild(b.node)}switch(b.size){case"small":h="superplate_small.gif";break;case"med":h="superplate_med.gif";break;case"large":h="superplate_large.gif";break;case"xlarge":h="superplate_xlarge.png";break;case"2xlarge":h="superplate_2xlarge.png";break;default:b.size="med";h="superplate_med.gif"}j=meteor.construct_url("static",h);b.margin=meteor.sharing.superbar.sizes[b.size]/8;b.button_width=(meteor.sharing.superbar.sizes[b.size]+b.margin*2);if(b.orientation==="vertical"){b.node.style.width=b.button_width.toString()+"px"}else{b.node.style.width=(b.button_width*b.sites.length).toString()+"px"}k=function(i,m,l){return function(){var p,n,o;p=m[i]&&m[i].title?m[i].title:m.title;n=m[i]&&m[i].message?m[i].message:m.message;o=m[i]&&m[i].image?m[i].image:m.image;meteor.sharing.superbar.href(i,p,n,o,l)}};var a,d,f;for(var c=0;c<b.sites.length;c++){a=b.sites[c];d=document.createElement("img");d.src=meteor.construct_url("static","none.gif");d.title="Share "+meteor.sharing.superbar.sites[a].readable_name;d.onclick=k(a,b,e);d.id=e+"_"+a;d.style.cursor="pointer";f=meteor.sharing.superbar.coords(a,b.size);d.style.width=f[1][0];d.style.height=f[1][1];if(b[a]&&b[a].icon_url){d.style.backgroundImage='url("'+b[a].icon_url+'")';d.style.backgroundRepeat="no-repeat"}else{d.style.backgroundImage='url("'+j+'")';d.style.backgroundRepeat="no-repeat";d.style.backgroundPosition=f[0][0]+" "+f[0][1]}d.style.margin=b.margin.toString()+"px";if(b.orientation==="vertical"){d.style.display="block"}b.node.appendChild(d)}};meteor.sharing.superbar.draw_mobile=function(b,f){var k,e,j,l,h;if(meteor.sharing.superbar.settings[f].parentID){h=document.getElementById(meteor.sharing.superbar.settings[f].parentID);h.appendChild(b.node)}switch(b.size){case"mobile-small":j="superplate_mobile-small.png";break;case"mobile-med":j="superplate_mobile-med.png";break;case"mobile-large":j="superplate_mobile-large.png";break;default:b.size="mobile-med";j="superplate_mobile-med.png"}l=meteor.construct_url("static",j);b.margin=meteor.sharing.superbar.sizes[b.size]/parseInt(b.margin,10);b.button_width=(meteor.sharing.superbar.sizes[b.size]+b.margin*2);e=meteor.detect_browser();if(e.device==="desktop"||e.version.toLowerCase()==="iphone"||(e.name.toLowerCase()==="android"&&parseInt(e.version,10)>=3)||(e.name.toLowerCase()==="blackberry"&&parseInt(e.version,10)>=7)||(e.name.toLowerCase()==="firefox"&&parseInt(e.version,10)>=6)){b.node.style.position="fixed"}else{b.node.style.position="absolute"}k=meteor.sharing.superbar.sizes[b.size]*parseFloat(b.inset_ratio);switch(b.page_position){case"left":b.node.style.width=b.button_width.toString()+"px";b.node.style.top=0;b.node.style.left=-k+"px";b.node.style.marginTop=b.corner_offset+"px";break;case"right":b.node.style.width=b.button_width.toString()+"px";b.node.style.top=0;b.node.style.right=-k+"px";b.node.style.marginTop=b.corner_offset+"px";break;case"top":b.node.style.width=(b.button_width*b.sites.length).toString()+"px";b.node.style.top=-k+"px";b.node.style.marginLeft=b.corner_offset+"px";break;case"bottom":b.node.style.width=(b.button_width*b.sites.length).toString()+"px";b.node.style.bottom=-k+"px";b.node.style.marginLeft=b.corner_offset+"px";break;default:b.node.style.width=b.button_width.toString()+"px";b.node.style.top=0;b.node.style.left=-k+"px";b.node.style.marginTop=b.corner_offset+"px"}m=function(i,o,n){return function(){var r,p,q;r=o[a]&&o[a].title?o[a].title:o.title;p=o[a]&&o[a].message?o[a].message:o.message;q=o[a]&&o[a].image?o[a].image:o.image;meteor.sharing.superbar.href(a,r,p,q,n)}};var a,d,m,g;for(var c=0;c<b.sites.length;c++){a=b.sites[c];d=document.createElement("img");d.src=meteor.construct_url("static","none.gif");d.title="Share "+meteor.sharing.superbar.sites[a].readable_name;d.onclick=m(a,b,f);d.id=f+"_"+a+"_mobile";d.style.cursor="pointer";g=meteor.sharing.superbar.coords(a,b.size);d.style.position="relative";d.style.width=g[1][0];d.style.height=g[1][1];d.style.zIndex="1001";d.style.backgroundImage='url("'+l+'")';d.style.backgroundRepeat="no-repeat";d.style.backgroundPosition=g[0][0]+" "+g[0][1];d.style.margin=b.margin.toString()+"px";if(b.page_position==="right"||b.page_position==="left"){d.style.display="block"}b.node.appendChild(d)}};meteor.sharing.superbar.configure=function(b,h,j){var d,c,e,g;d=function(i){meteor.sharing.superbar.reconfigure(i)};h=h||"master";j=j||d;if(meteor.missing(b)){b={}}c=meteor.clone(meteor.sharing.superbar.default_settings);for(e in b){if(b.hasOwnProperty(e)){c[e]=b[e]}}if(c.title===""){c.title=document.title?document.title:""}if(c.message===""){var k,f;k="";f=document.getElementsByTagName("meta");for(e=0;e<f.length;e++){if(f[e].name==="description"){k=f[e].content}}c.message=k}if(!c.application_id){c.application_id=meteor.tracking.settings.cookie_name}if(!c.hasOwnProperty("url_storage_source")){c.url_storage_source=meteor.tracking.settings.url_storage_source}if(!c.hasOwnProperty("application_id")||c.application_id===""){c.application_id=meteor.tracking.settings.cookie_name}if(b.redirect_uri){c.redirect_uri=meteor.construct_url("sharing","facebook_redirect/")+encodeURIComponent(b.redirect_uri)}meteor.sharing.superbar.settings[h]=c;var a=c.device==="mobile"?"mobile":"standard";g={application_id:c.application_id,fbid:meteor.tracking.permanent_storage.id,id:c.id,bar_id:h,url:c.url,url_storage_source:c.url_storage_source,device:a};meteor.json_query(meteor.construct_url("sharing","api/sharetool_config"),g,j)};meteor.sharing.superbar.reconfigure=function(a){var c,b;c=a.bar_id;a=a.config;for(b in a){if(a.hasOwnProperty(b)){meteor.sharing.superbar.settings[c][b]=a[b]}}};meteor.sharing.superbar.href=function(a,e,c,d,b){meteor.sharing.superbar.trigger(a,{title:e,message:c,image:d,bar_id:b})};meteor.sharing.superbar.trigger=function(b,d){var g,a,c,e;var h,i,j,f;h=d.bar_id?d.bar_id:"master";g=meteor.sharing.superbar.settings[h];a=meteor.sharing.superbar.sites[b];e=a.url;i=d.title||g.title;j=d.message||g.message;f=d.image||g.image;if(meteor.array.contains(a.params,"url")){e=e.replace("$url",encodeURIComponent(g.site_urls[b]))}if(meteor.array.contains(a.params,"title")){e=e.replace("$title",encodeURIComponent(i))}if(meteor.array.contains(a.params,"message")){e=e.replace("$message",encodeURIComponent(j))}if(meteor.array.contains(a.params,"image")){e=e.replace("$image",encodeURIComponent(f))}if(meteor.array.contains(a.params,"redirect")){e=e.replace("$redirect",encodeURIComponent(g.redirect_uri))}c={url:meteor.meteor_escape(g.url),application_id:g.application_id,site_id:b,pixel:true};setTimeout(function(){meteor.json_query(meteor.construct_url("sharing","api/record_click"),c,function(){})},1000);setTimeout(function(){meteor.sharing.superbar.persist_share(g,b)},100);if(b==="email"){window.location.href=e}else{meteor.sharing.superbar.open(e,a)}};meteor.sharing.superbar.share=function(i){var c,d,e,a,g,b;var j,h,f;i=i||window.event;c=i.target||i.srcElement;d=c.className.split("_");e=d[0];a=d[1];g=c.id.split("_");b=g[0]+"_message";j=document.getElementById(b).value.replace(/^\s+|\s+$/g,"");h=g[0]+"_usertitle";f=document.getElementById(h).value.replace(/^\s+|\s+$/g,"");meteor.sharing.superbar.href(a,f,j,e)};meteor.sharing.superbar.open=function(b,a){if(meteor.sharing.superbar.is_smartphone(navigator.userAgent)){window.open(b)}else{window.open(b,"","height="+a.height+",width="+a.width+",toolbar=no,directories=no,status=no,menubar=no,scrollbars=no,resizable=no")}};meteor.sharing.superbar.button_hover=function(a){var b;a=a||window.event;b=a.target||a.srcElement;b.style.color="#006881";b.style.backgroundColor="#DFF4FF"};meteor.sharing.superbar.button_nohover=function(a){var b;a=a||window.event;b=a.target||a.srcElement;b.style.color="#000000";b.style.backgroundColor="#F2F2F2"};meteor.sharing.superbar.coords=function(c,d){var f,b,g,e,a;f=meteor.sharing.superbar.sizes[d];b=(meteor.sharing.superbar.sites[c].offset*f).toString()+"px";g="0px";e=f.toString()+"px";a=f.toString()+"px";return[[b,g],[e,a]]};meteor.sharing.superbar.is_smartphone=function(a){a=a.toLowerCase();if(a.search("iphone")>-1){return true}else{if(a.search("ipod")>-1){return true}else{if(a.search("android")>-1&&a.search("webkit")>-1){return true}else{if(a.search("webos")>-1){return true}}}}return false};meteor.sharing.superbar.persist_share=function(d,b){var a,c;if(!meteor.missing(d.persist_urls)&&!meteor.missing(d.persist_urls[b])){a=document.createElement("img");a.src=d.persist_urls[b];c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(a,c)}};meteor.sharing.superbar.mobile={};meteor.sharing.superbar.mobile.init=function(b){var f,e,d,c,a;e=meteor.sharing.superbar.settings.master;f=meteor.sharing.superbar.sites[b];d=$("#inputs-"+b);a=$("#toshare-"+b);for(c=0;c<f.params.length;c++){a.html(e.site_urls[b]);if(f.params[c]==="title"){d.append($("<input>",{type:"text","class":"share-box",value:e.title,id:"sharetitle-"+b}))}if(f.params[c]==="message"){d.append($("<textarea>",{"class":"share-box",id:"sharemessage-"+b}).html(e.message))}}};meteor.sharing.superbar.mobile.share=function(a){var b,c;c=$("#sharetitle-"+a).val();b=$("#sharemessage-"+a).val();meteor.sharing.superbar.href(a,c,b,"master")}}};